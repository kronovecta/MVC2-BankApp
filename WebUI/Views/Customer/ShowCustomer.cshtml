@model BankApp.Application.Queries.GetCustomerByIdResponse
@using System.Globalization

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.ajax.unobtrusive/3.2.4/jquery.unobtrusive-ajax.min.js"></script>

<div class="container-customer">
    <section class="customer-top">
        <div>
            <h1>Welcome @Model.Customer.Givenname!</h1>

            <ul>
                <li><span class="bold">Name:</span> @Model.Customer.Givenname @Model.Customer.Surname</li>
                <li><span class="bold">Adress:</span> @Model.Customer.Streetaddress @Model.Customer.Zipcode @Model.Customer.City</li>
                @if (Model.Customer.Telephonenumber != null)
                {
                    <li><span class="bold">Phone:</span> (+@Model.Customer.Telephonecountrycode)@Model.Customer.Telephonenumber.Substring(1, Model.Customer.Telephonenumber.Length - 1)</li>
                }

                @if (Model.Customer.NationalId != null)
                {
                    <li><span class="bold">SSN:</span> @Model.Customer.NationalId</li>
                }

                @if (Model.Customer.Emailaddress != null)
                {
                    <li><span class="bold">Email:</span> @Model.Customer.Emailaddress</li>
                }

                <li><a asp-action="GetToken" asp-controller="Customer" data-ajax="true" data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#token-field" method="post" class="btn" asp-route-customerid=@Model.Customer.CustomerId>Token</a></li>
                <div id="token-field"></div>
            </ul>
        </div>
        @if (Model.Customer.Cards != null && Model.Customer.Cards.Count > 0)
        {
            <div class="debit-card">
                <partial name="_DebitCard" />
            </div>
        }

    </section>

    <section class="customer-accounts">
        <div class="account-header">
            <h3>Accounts</h3>
            <h3>Total: @Model.Customer.TotalBalance.ToString("C", CultureInfo.CurrentCulture)</h3>
        </div>

        @if(Model.Accounts != null) 
        {
            <ul>
                @foreach (var account in Model.Accounts)
                {
                    <li>
                        <a asp-action="ShowAccount" asp-controller="Customer" asp-route-accountid=@account.AccountId>
                            <div class="account-info">
                                <p class="account-info-name"><b>Konto</b></p>
                                <p class="account-info-number">910712-8056</p>
                            </div>
                            <p>@account.Balance.ToString("C", CultureInfo.CurrentCulture)</p>
                        </a>
                    </li>
                }
            </ul>
        }
        
    </section>
</div>